<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> Resource Management of Cloud | Xingjian Zhang's page </title> <meta name="author" content="Zhang Xingjian"> <meta name="description" content="Xingjian's Personal website. Based on [*folio](https://github.com/bogoli/-folio) design. "> <meta name="keywords" content="academic-website, technical-blogs"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%F0%9F%99%82&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://thuzxj.github.io/blog/2024/cloud-resource-management/"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script src="/assets/js/theme.js?0afe9f0ae161375728f7bcc5eb5b4ab4"></script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> Xingjian Zhang's page </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item "> <a class="nav-link" href="/blog/">blog </a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">publications </a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">cv </a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fa-solid fa-moon"></i> <i class="fa-solid fa-sun"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">Resource Management of Cloud</h1> <p class="post-meta"> December 10, 2024 </p> <p class="post-tags"> <a href="/blog/2024"> <i class="fa-solid fa-calendar fa-sm"></i> 2024 </a>   ·   <a href="/blog/tag/cloud"> <i class="fa-solid fa-hashtag fa-sm"></i> cloud</a>   <a href="/blog/tag/vm"> <i class="fa-solid fa-hashtag fa-sm"></i> VM</a>   <a href="/blog/tag/resource"> <i class="fa-solid fa-hashtag fa-sm"></i> "resource</a>   <a href="/blog/tag/management"> <i class="fa-solid fa-hashtag fa-sm"></i> management"</a>     ·   <a href="/blog/category/academic"> <i class="fa-solid fa-tag fa-sm"></i> academic</a>   </p> </header> <article class="post-content"> <div id="markdown-content"> <p>Cloud computing keeps growing and provides many kinds of products for various workloads. Cloud providers and academic researchers focus on how to provide the given services with less cost, that is more efficiently. Numerous works focus on improving significant components like resource allocation, instance placement, resource harvesting and so on. Specifically, the development of AI promotes the exploration of AI for systems.</p> <p>As interested in this important problem, I have surveyed it and tried to figure out some research opportunities. Unfortunately, many of them are done and must be done by companies or the cooperation of companies and academic institutes, because of the limitation of characterizing requests’ features, finding practical problems, and validating new ideas in laboratories. However, these works give valuable insights such as how to improve large-scale systems and handle indeterministic workload.</p> <p>This article is aimed to summarize some research works and record some of my thoughts about this problem. If there are any errors in this article, feel free to contact me to correct them and I will appreciate it.</p> <h2 id="brief-introduction-to-cloud">Brief Introduction to Cloud</h2> <p>To abstract and define the problem of resource management, I would like to have a brief introduction of Cloud Computing first.</p> <h3 id="products-in-the-cloud">Products in the Cloud</h3> <p>There are three main cloud computing models, that is Infrastructure as a Service (IaaS), Platform as a Service (PaaS), and Software as a Service (SaaS). Public cloud providers provide multiple kinds of products in IaaS and PaaS, including:</p> <table> <thead> <tr> <th>Product Type</th> <th>Product Example</th> <th>Computing Model</th> </tr> </thead> <tbody> <tr> <td>Bare-metal machines</td> <td>AWS EC2 Bare Metal</td> <td>IaaS</td> </tr> <tr> <td>Virtual machines</td> <td>AWS EC2</td> <td>IaaS</td> </tr> <tr> <td>Kubernetes Engine</td> <td>AWS EKS</td> <td>PaaS</td> </tr> <tr> <td>Serverless / Function as a Service</td> <td>AWS Lambda</td> <td>PaaS</td> </tr> </tbody> </table> <h3 id="the-deployment-of-the-products">The Deployment of the Products</h3> <p>Given a data center with many resources, how do these different kinds of products run together in the same data center? For the convenience of management and development, the products (may) run hierarchically. Virtual machines are running on the top of physical machines. Containers and container schedulers are running on the top of virtual machines.</p> <p>The process of deployment is composed of several steps, including resource allocation, instance placement and preemption &amp; migration.</p> <h4 id="resource-allocation-specification">Resource Allocation Specification</h4> <p>Users should specify the resource allocation strategy of the cloud products, such as the size of VMs or containers, and the autoscaling configurations of services.</p> <h4 id="instance-placement">Instance Placement</h4> <p>As the resource pool is composed of multiple nodes, the cloud provider should decide the placement of each instance. The placement should consider both the resource efficiency and the additional requirements from users such as affinity configurations. The placement problem can be modeled as Bin-packing problem, where the nodes are bins and the instances are items.</p> <h4 id="instance-preemption--eviction-migration">Instance Preemption / Eviction/ Migration</h4> <p>On nodes with an oversubscription mechanism, part of the instances are able to be preempted, or evicted or migrated to release resources for the more important instances. Preemption and migration reduce the reliability of the affected instances. In IaaS, the preemptible instances are called spot VMs or harvest VMs and are cheaper than regular VMs.</p> <h3 id="cloud-targets">Cloud Targets</h3> <h4 id="from-user">From User</h4> <p>Users have different targets for cloud projects for various kinds of workloads.</p> <ul> <li>For computing workload (e.g. batch processing): Less cost</li> <li>For latency-sensitive workload (e.g. VMs running user-facing service): No resource contention; guarantee for providing all the required resource</li> <li>For dynamic workload (e.g. serverless/microservice services): Dynamic resource allocation that can scale quickly for burst workload; guarantee for meeting SLO (P95 max response latency is smaller than threshold)</li> </ul> <h4 id="from-provider">From Provider</h4> <ul> <li>Meet users’ targets</li> <li>Less cost <ul> <li>Fewer needed physical machines</li> <li>Less power</li> <li>Less carbon footprint</li> <li>Lower scheduling system overhead</li> </ul> </li> <li>More profits <ul> <li>More product selling</li> <li>Higher resource utilization</li> </ul> </li> </ul> <h2 id="improvement-opportunities">Improvement Opportunities</h2> <p>Referring to the three steps of the deployment of the projects, here are several methods to improve resource management.</p> <h3 id="resource-allocation-optimization">Resource Allocation Optimization</h3> <p><strong>Insight:</strong> Specifying the resource allocation strategies may be difficult for developers and operators, replacing the process with automatic frameworks can lead to better results.</p> <details> <summary>Papers</summary> <ul> <li>SelfTune: Tuning Cluster Managers (MS, NSDI'23)</li> <li>With Great Freedom Comes Great Opportunity: Rethinking Resource Allocation for Serverless Functions (IST(ULisboa)/INESC-ID and UCLouvain, MS, EuroSys'23)</li> <li>Karma: Resource Allocation for Dynamic Demands (Cornell, OSDI'23)</li> <li>Golgi: Performance-Aware, Resource-Efficient Function Scheduling for Serverless Computing (HKUST, WeBank, SoCC'23)</li> <li>Autopilot: Workload autoscaling at google. (Google, EuroSys'20)</li> <li>Largescale cluster management at Google with Borg. (Google, EuroSys'15)</li> <li>Quasar: Resource-efficient and QoS-aware cluster management (ASPLOS'14)</li> </ul> </details> <h3 id="oversubscription-of-instances-to-increase-resource-utilization">Oversubscription of Instances to Increase Resource Utilization</h3> <p><strong>Insight:</strong> As the utilizations of instances on the nodes are always below the highest level, the oversubscription (aka overcommitment) strategy is used to put more instances on the nodes to increase the utilization of the nodes. The simple oversubscription method is to set a fixed oversubscription ratio (&gt; 1), and the scheduler can allocate resources to instances whose sum can exceed the total number of the resources of the node. However, oversubscription introduces the possibility of resource contention when utilizations of multiple instances go high. Some works focus on avoiding the problem through characterizing, profiling, predicting, etc.</p> <h5 id="papers">Papers</h5> <ul> <li>Harmonizing Efficiency and Practicability: Optimizing Resource Utilization in Serverless Computing with Jiagu (SJTU, HW, ATC’24)</li> <li>Dynamic Idle Resource Leasing To Safely Oversubscribe Capacity At Meta (Meta, SoCC’24)</li> <li>Prediction-Based Power Oversubscription in Cloud Platforms (MS, ATC’21)</li> <li>History-based harvesting of spare cycles and storage in large-scale datacenters (OSDI’16)</li> </ul> <h3 id="improvement-of-underlying-schedulers">Improvement of Underlying Schedulers</h3> <p><strong>Insight:</strong> The colocation of multiple instances in one nodes depends on the task scheduler of the node. In underlying schedulers, discovering fine-grained improvements can increase resource utilization.</p> <h4 id="papers-1">Papers</h4> <ul> <li>Maximizing VMs’ IO Performance on Overcommitted CPUs with Fairness (The University of Edinburgh, HW, SoCC’23)</li> <li>Improving resource utilization by timely fine-grained scheduling. (CUHK, SOSP’20)</li> </ul> <h3 id="unified-large-scale-resource-management">Unified Large-Scale Resource management</h3> <p><strong>Insight:</strong> The unified resource management system that manages all the machines in all datacenters and schedules all workloads of different priorities can lead to a more flexible and optimized resource utilization.</p> <h4 id="papers-2">Papers</h4> <ul> <li>Optimizing Resource Allocation in Hyperscale Datacenters: Scalability, Usability, and Experiences (Meta, OSDI’24)</li> <li>Gödel: Unified Large-Scale Resource Management and Scheduling at ByteDance (BD, SoCC’23)</li> <li>Workload Consolidation in Alibaba Clusters: The Good, the Bad, and the Ugly (HKUST, Alibaba, SoCC’22)</li> <li>Twine: A Unified Cluster Management System for Shared Infrastructure (Facebook, OSDI’20)</li> <li>Protean: VM Allocation Service at Scale (MS, OSDI’20)</li> </ul> <h3 id="hardware-resource-disaggregation">Hardware Resource Disaggregation</h3> <p><strong>Insight:</strong> Resource disaggregation makes instance placement easier and increases the resource utilization. Currently, storage is managed separately, but CPU, memory and GPU resources are coupled in same nodes.</p> <ul> <li>With Great Freedom Comes Great Opportunity: Rethinking Resource Allocation for Serverless Functions (IST(ULisboa)/INESC-ID and UCLouvain, MS, EuroSys’23)</li> <li>LegoOS: A Disseminated, Distributed OS for Hardware Resource Disaggregation (Purdue, OSDI’18)</li> </ul> <h3 id="resources-harvesting-from-unallocated-resources">Resources Harvesting from Unallocated Resources</h3> <p><strong>Insight:</strong> Preemptible VMs like spot VMs and harvest VMs are much cheaper but less reliable. Some works are aimed at reducing the damage to the applications caused by the stop of preemptible VMs.</p> <h4 id="papers-3">Papers</h4> <ul> <li>Unlocking unallocated cloud capacity for long, uninterruptible workloads (CMU, MS, NSDI’23)</li> <li>Snape: Reliable and Low-Cost Computing with Mixture of Spot and On-Demand VMs (MS, ASPLOS’23)</li> <li>Providing SLOs for Resource-Harvesting VMs in Cloud Platforms (MS, OSDI’20)</li> <li>History-Based Harvesting of Spare Cycles and Storage in Large-Scale Datacenters (UMich, MS, OSDI’16)</li> </ul> <h4 id="applications-of-harvested-resources">Applications of Harvested Resources</h4> <ul> <li>Parcae: Proactive, Liveput-Optimized DNN Training on Preemptible Instances (CUHK, NSDI’24)</li> <li>SpotServe: Serving Generative Large Language Models on Preemptible Instances (CMU, ASPLOS ’24)</li> <li>Faster and Cheaper Serverless Computing on Harvested Resources (Cornell, MS, SOSP’21)</li> </ul> <h2 id="dataset-resources">Dataset Resources</h2> <h3 id="cluster-traces">cluster traces:</h3> <p><a href="https://tianchi.aliyun.com/dataset/6287" rel="external nofollow noopener" target="_blank">Alibaba</a></p> <p><a href="https://github.com/alibaba/clusterdata" rel="external nofollow noopener" target="_blank">Alibaba</a></p> <p><a href="https://github.com/Azure/AzurePublicDataset" rel="external nofollow noopener" target="_blank">Azure</a></p> <p><a href="https://github.com/google/cluster-data" rel="external nofollow noopener" target="_blank">Google</a></p> <h3 id="serverless-traces">serverless traces:</h3> <p><a href="https://github.com/alibaba/clusterdata" rel="external nofollow noopener" target="_blank">Alibaba</a></p> <p><a href="https://github.com/sir-lab/data-release" rel="external nofollow noopener" target="_blank">Huawei</a></p> <p><a href="https://github.com/Azure/AzurePublicDataset" rel="external nofollow noopener" target="_blank">Azure</a></p> <h2 id="related-techniques">Related Techniques</h2> <h3 id="virtualization-techniques">Virtualization Techniques</h3> <h3 id="resource-contention-and-resource-isolation">Resource Contention and Resource Isolation</h3> <h3 id="observability">Observability</h3> <p><a href="https://www.brendangregg.com/blog/2017-05-09/cpu-utilization-is-wrong.html" rel="external nofollow noopener" target="_blank">CPU Utilization is Wrong</a></p> <p><a href="https://www.brendangregg.com/usemethod.html" rel="external nofollow noopener" target="_blank">USE Method</a></p> <h3 id="hypervisors-scheduler">Hypervisor’s Scheduler</h3> <p>vCPU</p> <p>vCPU overcommitment</p> <h2 id="references">References</h2> <p>Cloud Computing Models: https://aws.amazon.com/types-of-cloud-computing/</p> <p>Firecracker: Lightweight Virtualization for Serverless Applications: https://aws.amazon.com/cn/blogs/china/deep-analysis-aws-firecracker-principle-virtualization-container-runtime-technology/</p> </div> </article> <br> <hr> <br> <ul class="list-disc pl-8"></ul> <h2 class="text-3xl font-semibold mb-4 mt-12">Enjoy Reading This Article?</h2> <p class="mb-2">Here are some more articles you might like to read next:</p> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/microservices/">A Survey of Research on Microservices</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/microservices-serverlss/">The difference between microservices and serverless computing: the event-driven architecture</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2023/deterministic-build-by-eBPF/">Deterministic Compilation by eBPF (基于eBPF的确定性编译工具)</a> </li> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2024 Zhang Xingjian. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2930004b8d7fcd0a8e00fdcfc8fc9f24"></script> <script defer src="/assets/js/common.js?4a129fbf39254905f505c7246e641eaf"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>